<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Chapter 4. Writing Aspects</title><link rel="stylesheet" href="docbook.css" type="text/css"></link><meta name="generator" content="DocBook XSL Stylesheets V1.71.0"></meta><link rel="start" href="index.html" title="phpAspect documentation"></link><link rel="up" href="index.html" title="phpAspect documentation"></link><link rel="prev" href="install.html" title="Chapter 3. Installing phpAspect"></link><link rel="next" href="joinpoints.html" title="Chapter 5. Joinpoints"></link><script xmlns="" src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script xmlns="" type="text/javascript">
    _uacct = "UA-259974-1";
    urchinTracker();
    </script></head><body><a xmlns="" href="http://phpaspect.org"><img src="http://phpaspect.org/images/phpaspect.png" alt="phpAspect Logo" style="border:0;"></a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Writing Aspects</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="install.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="joinpoints.html">Next</a></td></tr></table><hr></hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="aspects"></a>Chapter 4. Writing Aspects</h2></div></div></div><p>
  phpAspect extends the syntax of the php compiler in order
  to introduce a new software entity called aspects.
  All aspects must be written in a file with the
  <span class="emphasis"><em>.aspect.php</em></span> extension.
  </p><p>
  In a <span class="emphasis"><em>aspect.php</em></span> file, all the
  code outside the aspect entity will be ignored by phpAspect.
  </p><div class="example"><a id="first-aspect.php"></a><p class="title"><b>Example 4.1: Your first aspect with phpAspect</b></p><div class="example-contents"><pre class="programlisting"><code><span class="default">&lt;?php</span><br /><span class="default">aspect</span><span class="default">&nbsp;</span><span class="default">MyCrosscuttingConcern</span><span class="keyword">{</span><br />&nbsp;<br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//Attributes</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//Methods</span><br />&nbsp;<br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//Poincuts</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//Advices</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//Inter-type&nbsp;declarations</span><br /><span class="keyword">}</span><br /><span class="comment">//The&nbsp;code&nbsp;outside&nbsp;the&nbsp;aspect&nbsp;will&nbsp;be&nbsp;ignored</span><br /><span class="default">?&gt;</span><br /></code></pre></div></div><br class="example-break"></br><p>
    Aspects are first classes entities during the
    execution. During the execution of your program, 
    aspects are represented by classes having attributes and methods.
    </p><p>
    This mean that you can write user defined methods, attributes and contants into aspects.
    </p><div class="example"><a id="first-class-entity.php"></a><p class="title"><b>Example 4.2: Aspects are first classes entities during the execution</b></p><div class="example-contents"><pre class="programlisting"><code><span class="default">&lt;?php</span><br /><span class="default">aspect</span><span class="default">&nbsp;</span><span class="default">ObserverPattern</span><span class="keyword">{</span><br />&nbsp;<br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">private</span><span class="default">&nbsp;</span><span class="default">$observers</span><span class="default">&nbsp;</span><span class="keyword">=</span><span class="default">&nbsp;</span><span class="keyword">array</span><span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span><br />&nbsp;<br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">public</span><span class="default">&nbsp;</span><span class="keyword">function</span><span class="default">&nbsp;</span><span class="default">addObserver</span><span class="keyword">(</span><span class="default">Observer</span><span class="default">&nbsp;</span><span class="default">$o</span><span class="keyword">)</span><span class="keyword">{</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">observers</span><span class="keyword">[</span><span class="keyword">]</span><span class="default">&nbsp;</span><span class="keyword">=</span><span class="default">&nbsp;</span><span class="default">$o</span><span class="keyword">;</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">}</span><br /><span class="keyword">}</span><br /><span class="default">?&gt;</span><br /></code></pre></div></div><br class="example-break"></br><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        All aspects are instanciate with a singleton pattern
        when the program execution starts.
        </p></div></div><div class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="install.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="joinpoints.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 3. Installing phpAspect </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 5. Joinpoints</td></tr></table></div><div xmlns="" class="copyright-notice"><a href="appendixes.copyright.html">Copyright</a> © 2006-2007 <a href="mailto:wcandillon@elv.telecom-lille1.eu">William Candillon</a>
      and <a href="mailto:vanwormhoudt@telecom-lille1.eu">Gilles Vanwormhoudt</a>.
    </div></body></html>
