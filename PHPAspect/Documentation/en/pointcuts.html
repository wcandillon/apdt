<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Chapter 6. Poincuts</title><link rel="stylesheet" href="docbook.css" type="text/css"></link><meta name="generator" content="DocBook XSL Stylesheets V1.71.0"></meta><link rel="start" href="index.html" title="phpAspect documentation"></link><link rel="up" href="index.html" title="phpAspect documentation"></link><link rel="prev" href="joinpoints.html" title="Chapter 5. Joinpoints"></link><link rel="next" href="advices.html" title="Chapter 7. Advices"></link><script xmlns="" src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script xmlns="" type="text/javascript">
    _uacct = "UA-259974-1";
    urchinTracker();
    </script></head><body><a xmlns="" href="http://phpaspect.org"><img src="http://phpaspect.org/images/phpaspect.png" alt="phpAspect Logo" style="border:0;"></a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 6. Poincuts</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="joinpoints.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="advices.html">Next</a></td></tr></table><hr></hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="pointcuts"></a>Chapter 6. Poincuts</h2></div></div></div><p>
    Pointcuts compose joinpoints like predicates, using:
    <strong class="userinput"><code>||</code></strong> (or), <strong class="userinput"><code>&amp;&amp;</code></strong> (and) and <strong class="userinput"><code>!</code></strong> (not).
    </p><p>
        In the following example, we intercept all constructions of an Account instance 
        and all executions of the methods from the Account class except the login method:
    </p><strong class="userinput"><code>pointcut ensureAuthorization:(new(Account(0)) || exec(public Account::*(*)))
        &amp;&amp; !exec(public Account::login(2));</code></strong><p>
    The following example shows the flexibily of the poincut syntax
    </p><div class="example"><a id="pointcuts-syntax"></a><p class="title"><b>Example 6.1: Pointcuts syntax.</b></p><div class="example-contents"><pre class="programlisting"><code><span class="default">&lt;?php</span><br /><span class="default">aspect</span><span class="default">&nbsp;</span><span class="default">Security</span><span class="keyword">{</span><br />&nbsp;<br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">pointcut</span><span class="default">&nbsp;</span><span class="default">accountConstruction</span><span class="keyword">:</span><span class="keyword">new</span><span class="keyword">(</span><span class="default">Account</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">pointcut</span><span class="default">&nbsp;</span><span class="default">accountExecution</span><span class="keyword">:</span><span class="default">exec</span><span class="keyword">(</span><span class="keyword">public</span><span class="default">&nbsp;</span><span class="default">Account</span><span class="keyword">::</span><span class="keyword">*</span><span class="keyword">(</span><span class="keyword">*</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span><br />&nbsp;<br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">around</span><span class="keyword">(</span><span class="keyword">)</span><span class="keyword">:</span><span class="default">&nbsp;</span><span class="keyword">(</span><span class="default">accountConstruction</span><span class="default">&nbsp;</span><span class="keyword">||</span><span class="default">&nbsp;</span><span class="default">accountExecution</span><span class="keyword">)</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">and</span><span class="default">&nbsp;</span><span class="keyword">!</span><span class="default">exec</span><span class="keyword">(</span><span class="keyword">public</span><span class="default">&nbsp;</span><span class="default">Account</span><span class="keyword">::</span><span class="default">login</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">{</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//Ensure&nbsp;Authorization...</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">}</span><br /><span class="keyword">}</span><br /><span class="default">?&gt;</span><br /></code></pre></div></div><br class="example-break"></br></div><div class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="joinpoints.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="advices.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 5. Joinpoints </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 7. Advices</td></tr></table></div><div xmlns="" class="copyright-notice"><a href="appendixes.copyright.html">Copyright</a> © 2006-2007 <a href="mailto:wcandillon@elv.telecom-lille1.eu">William Candillon</a>
      and <a href="mailto:vanwormhoudt@telecom-lille1.eu">Gilles Vanwormhoudt</a>.
    </div></body></html>
